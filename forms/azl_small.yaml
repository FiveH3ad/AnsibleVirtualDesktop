- name: Deploy Azure Landing Zone Enterprise Scale for small business
  showHelp: true
  help: >
    This form creates a new Azure Landing Zone Enterprise Scale for small business
  roles:
    - public
  description: Creates new Azure Landing Zone Enterprise Scale for small business
  categories:
    - Azure
    - Landing Zones
  icon: desktop
  template: demo2
  type: awx
  credentials:
    awx_rest: "awx"
  fields:
    - type: enum
      name: customer_full
      label: Customer
      values:
        - Customer 1
        - Customer 2
      default: __auto__
    - type: expression
      name: organization_id
      label: Organization ID
      expression: 'fn.fnRestJwtSecure(''get'', ''https://$(awx_instance)/api/v2/organizations/?search=$(customer_full)'', '''', ''awx_rest'', ''[.results[] | select(.name == "$(customer_full)").id]'')'
      hide: true
    - type: enum
      name: subscription_ids
      expression: >
        fn.fnRestAdvanced(
          'get',
          'https://sadevchnawx05.table.core.windows.net/CustomerSubscriptions()?$filter=PartitionKey%20eq%20%27Customer%201%27&sv=2022-11-02&ss=t&srt=sco&sp=rl&se=2024-04-06T20:42:31Z&st=2024-03-04T13:42:31Z&spr=https&sig=l7OzeDWu5DbLpeT%2BzBJ3xP6ARLMU6YUx1kvOmMEGlkw%3D',
          '',
          {'Accept':'application/json'},
          '[.value[].RowKey]',
          {},
          false
        )
      label: Subscriptions
      default: __auto__